<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<title>ì „êµ­ ì§€ì—­ ì„ íƒ í™”ë©´</title>
<script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>

<style>
/* ================= ìœ„ì¹˜ ì¡°ì ˆìš© ë³€ìˆ˜ ================= */
:root {
    /* ğŸ”¥ ë¬¸êµ¬ ì „ì²´ ì‹œì‘ì  (ì´ê²Œ ê¸°ì¤€ì ) */
    --message-left: 860px;  /* â†’ ì˜¤ë¥¸ìª½ / â† ì™¼ìª½ */
    --message-top: 850px;   /* â†“ ì•„ë˜ / â†‘ ìœ„ */

    /* ì‹œ Â· êµ° Â· êµ¬ ë¯¸ì„¸ ë†’ì´ ì¡°ì ˆ */
    --region-offset-y: 6px; /* â†‘ â†“ */
}
/* =================================================== */

body {
    margin: 0;
    background: #1a1a1a;
    display: flex;
    justify-content: center;
    align-items: center;
    height: 100vh;
    font-family: Arial, sans-serif;
}

#content {
    width: 1536px;
    height: 1024px;
    background: url('bok.png') center/cover no-repeat;
    position: relative;
    color: #FFD700;
    text-shadow: 0 0 10px #000;
}

/* ì‹œê°„ */
#time {
    position: absolute;
    top: 20px;
    right: 20px;
    font-size: 80px;
    font-weight: bold;
}

/* ================= ë¬¸êµ¬ ë¸”ë¡ ================= */
#message {
    position: absolute;
    left: var(--message-left);
    top: var(--message-top);

    display: flex;
    flex-direction: column;
    align-items: flex-start; /* â­ ì‹œì‘ ë¬¸ì ê¸°ì¤€ */
    gap: 4px;
}

.line {
    font-size: 32px;
    font-weight: 600;
    line-height: 1.1;
    white-space: nowrap;
}

/* ì‹œ Â· êµ° Â· êµ¬ */
#region {
    font-size: 36px;
    font-weight: 900;
    color: #fff;
    line-height: 1.1;

    position: relative;
    top: var(--region-offset-y);
}
/* ============================================ */

/* ì„ íƒ UI */
#selector {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    background: rgba(0,0,0,.6);
    padding: 25px 40px;
    border-radius: 12px;
}

select {
    width: 420px;
    padding: 10px;
    font-size: 22px;
    margin-bottom: 10px;
    background: #222;
    color: #FFD700;
    border: 2px solid #FFD700;
}

#capture-btn {
    position: absolute;
    bottom: 20px;
    right: 20px;
    padding: 14px 28px;
    font-size: 20px;
    background: rgba(255,105,180, 0.6); /* í•‘í¬ìƒ‰ìœ¼ë¡œ ë³€ê²½ */
    color: #fff;
    border: 2px solid #FFD700;
    cursor: pointer;
    font-weight: bold;
}

.hide { display:none !important; } /* !important ì¶”ê°€í•˜ì—¬ í™•ì‹¤íˆ ìˆ¨ê¹€ */
</style>
</head>

<body>
<div id="content">
    <div id="time"></div>

    <div id="message">
        <div class="line">ê°€ê¹Œìš´ ê³³ì—ì„œ, ëŒë¦¼ì´ í”¼ëŠ” ì¤‘</div>
        <div id="region">ì§€ì—­ì„ ì„ íƒí•´ ì£¼ì„¸ìš”</div>
        <div class="line">ê·¼ì²˜ì˜ ëˆ„êµ°ê°€ë¥¼ ì°¾ê³  ìˆì–´ìš”..</div>
    </div>

    <div id="selector">
        <select id="sido"></select>
        <select id="sigungu"></select>
    </div>

    <button id="capture-btn">ğŸ“¸ í™”ë©´ ìº¡ì²˜</button>
</div>

<script>
const regions = {
    "ì„œìš¸íŠ¹ë³„ì‹œ": ["ê°•ë‚¨êµ¬","ê°•ë™êµ¬","ê°•ë¶êµ¬","ê°•ì„œêµ¬","ê´€ì•…êµ¬","ê´‘ì§„êµ¬","êµ¬ë¡œêµ¬","ê¸ˆì²œêµ¬","ë…¸ì›êµ¬","ë„ë´‰êµ¬","ë™ëŒ€ë¬¸êµ¬","ë™ì‘êµ¬","ë§ˆí¬êµ¬","ì„œëŒ€ë¬¸êµ¬","ì„œì´ˆêµ¬","ì„±ë™êµ¬","ì„±ë¶êµ¬","ì†¡íŒŒêµ¬","ì–‘ì²œêµ¬","ì˜ë“±í¬êµ¬","ìš©ì‚°êµ¬","ì€í‰êµ¬","ì¢…ë¡œêµ¬","ì¤‘êµ¬","ì¤‘ë‘êµ¬"],
    "ë¶€ì‚°ê´‘ì—­ì‹œ": ["ì¤‘êµ¬","ì„œêµ¬","ë™êµ¬","ì˜ë„êµ¬","ë¶€ì‚°ì§„êµ¬","ë™ë˜êµ¬","ë‚¨êµ¬","ë¶êµ¬","í•´ìš´ëŒ€êµ¬","ì‚¬í•˜êµ¬","ê¸ˆì •êµ¬","ê°•ì„œêµ¬","ì—°ì œêµ¬","ìˆ˜ì˜êµ¬","ì‚¬ìƒêµ¬","ê¸°ì¥êµ°"],
    "ëŒ€êµ¬ê´‘ì—­ì‹œ": ["ì¤‘êµ¬","ë™êµ¬","ì„œêµ¬","ë‚¨êµ¬","ë¶êµ¬","ìˆ˜ì„±êµ¬","ë‹¬ì„œêµ¬","ë‹¬ì„±êµ°"],
    "ì¸ì²œê´‘ì—­ì‹œ": ["ì¤‘êµ¬","ë™êµ¬","ë¯¸ì¶”í™€êµ¬","ì—°ìˆ˜êµ¬","ë‚¨ë™êµ¬","ë¶€í‰êµ¬","ê³„ì–‘êµ¬","ì„œêµ¬","ê°•í™”êµ°","ì˜¹ì§„êµ°"],
    "ê²½ê¸°ë„": ["ìˆ˜ì›ì‹œ","ì„±ë‚¨ì‹œ","ê³ ì–‘ì‹œ","ìš©ì¸ì‹œ","ë¶€ì²œì‹œ","ì•ˆì‚°ì‹œ","ì•ˆì–‘ì‹œ","ë‚¨ì–‘ì£¼ì‹œ","í™”ì„±ì‹œ","í‰íƒì‹œ","ì˜ì •ë¶€ì‹œ","ì‹œí¥ì‹œ","íŒŒì£¼ì‹œ","ê¹€í¬ì‹œ","ê´‘ëª…ì‹œ","ê´‘ì£¼ì‹œ","êµ°í¬ì‹œ","ì˜¤ì‚°ì‹œ","ì´ì²œì‹œ","ì•ˆì„±ì‹œ","ì˜ì™•ì‹œ","í•˜ë‚¨ì‹œ","ì—¬ì£¼ì‹œ","ì–‘ì£¼ì‹œ","ë™ë‘ì²œì‹œ","ê³¼ì²œì‹œ","í¬ì²œì‹œ","ê°€í‰êµ°","ì–‘í‰êµ°","ì—°ì²œêµ°"],
    "ì œì£¼íŠ¹ë³„ìì¹˜ë„": ["ì œì£¼ì‹œ","ì„œê·€í¬ì‹œ"]
};

const sido = document.getElementById('sido');
const sigungu = document.getElementById('sigungu');
const regionDisplay = document.getElementById('region');

// ì´ˆê¸°ê°’ ì„¤ì •
sido.innerHTML = `<option value="">ê´‘ì—­ìì¹˜ë‹¨ì²´ ì„ íƒ</option>`;
Object.keys(regions).forEach(r => sido.innerHTML += `<option>${r}</option>`);
sigungu.innerHTML = `<option value="">ì‹œ / êµ° / êµ¬ ì„ íƒ</option>`;
regionDisplay.textContent = "ì§€ì—­ì„ ì„ íƒí•´ ì£¼ì„¸ìš”"; // ì´ˆê¸° ë©”ì‹œì§€ ì„¤ì •

sido.onchange = () => {
    sigungu.innerHTML = `<option value="">ì‹œ / êµ° / êµ¬ ì„ íƒ</option>`;
    regions[sido.value]?.forEach(sg => sigungu.innerHTML += `<option>${sg}</option>`);
    regionDisplay.textContent = sido.value || "ì§€ì—­ì„ ì„ íƒí•´ ì£¼ì„¸ìš”"; 
};

sigungu.onchange = () => {
    regionDisplay.textContent =
        `${sido.value} ${sigungu.value}`;
};

/* ì‹œê°„ */
setInterval(() => {
    const d = new Date();
    document.getElementById('time').textContent =
        `${String(d.getHours()).padStart(2,'0')}:${String(d.getMinutes()).padStart(2,'0')}:${String(d.getSeconds()).padStart(2,'0')}`;
}, 1000);

/* ìº¡ì²˜ ê¸°ëŠ¥ (ìƒˆ íƒ­ì—ì„œ ì´ë¯¸ì§€ ì—´ê¸°) */
document.getElementById('capture-btn').onclick = () => {
    const content = document.getElementById('content');
    const selector = document.getElementById('selector');
    const captureBtn = document.getElementById('capture-btn');

    // ìº¡ì²˜ ì „ì— UI ìˆ¨ê¹€
    selector.classList.add('hide');
    captureBtn.classList.add('hide');

    html2canvas(content, {
        scale: 2, 
        useCORS: true,
        // ìº¡ì²˜ ëŒ€ìƒì—ì„œ ì œì™¸í•  ìš”ì†Œë¥¼ ëª…ì‹œì ìœ¼ë¡œ ì²˜ë¦¬í•  í•„ìš” ì—†ì´, ì´ë¯¸ í´ë˜ìŠ¤ 'hide'ë¡œ ìˆ¨ê²¼ìŠµë‹ˆë‹¤.
    }).then(canvas => {
        // ìº¡ì²˜ í›„ UI ë‹¤ì‹œ í‘œì‹œ
        selector.classList.remove('hide');
        captureBtn.classList.remove('hide');
        
        const dataURL = canvas.toDataURL('image/png');

        // ìƒˆ íƒ­ì„ ì—´ì–´ ìº¡ì²˜ëœ ì´ë¯¸ì§€ë¥¼ ë³´ì—¬ì¤ë‹ˆë‹¤.
        const newWindow = window.open();
        newWindow.document.write('<img src="' + dataURL + '" alt="ìº¡ì²˜ëœ ì´ë¯¸ì§€" style="max-width: 100%; height: auto;">');
        newWindow.document.title = 'ì§€ì—­í™”ë©´ ìº¡ì²˜';

        alert(`âœ… í™”ë©´ ìº¡ì²˜ê°€ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤. ìƒˆ íƒ­ì—ì„œ ì´ë¯¸ì§€ë¥¼ í™•ì¸í•˜ê³  ì €ì¥í•´ì£¼ì„¸ìš”.`);
        
    }).catch(err => {
        // ì—ëŸ¬ ë°œìƒ ì‹œ ìˆ¨ê²¼ë˜ UI ë‹¤ì‹œ í‘œì‹œ
        selector.classList.remove('hide');
        captureBtn.classList.remove('hide');
        console.error("ìº¡ì²˜ ì‹¤íŒ¨:", err);
        alert("âŒ í™”ë©´ ìº¡ì²˜ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤. (ì½˜ì†” ë¡œê·¸ í™•ì¸)");
    });
};
</script>
</body>
</html>
