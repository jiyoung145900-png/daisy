<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<title>전국 지역 선택 화면</title>
<script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>

<style>
/* ================= 위치 조절용 변수 ================= */
:root {
    /* 🔥 문구 전체 시작점 (이게 기준점) */
    --message-left: 860px;  /* → 오른쪽 / ← 왼쪽 */
    --message-top: 850px;   /* ↓ 아래 / ↑ 위 */

    /* 시 · 군 · 구 미세 높이 조절 */
    --region-offset-y: 6px; /* ↑ ↓ */
}
/* =================================================== */

body {
    margin: 0;
    background: #1a1a1a;
    display: flex;
    justify-content: center;
    align-items: center;
    height: 100vh;
    font-family: Arial, sans-serif;
    position: relative; 
}

#content {
    width: 1536px;
    height: 1024px;
    background: url('bok.png') center/cover no-repeat;
    position: relative;
    color: #FFD700;
    text-shadow: 0 0 10px #000;
    /* content 영역 자체를 중앙에 배치 */
    box-shadow: 0 0 20px rgba(0, 0, 0, 0.5); /* 시각적 구분 추가 */
}

/* 시간 */
#time {
    position: absolute;
    top: 20px;
    right: 20px;
    font-size: 80px;
    font-weight: bold;
}

/* ================= 문구 블록 ================= */
#message {
    position: absolute;
    left: var(--message-left);
    top: var(--message-top);

    display: flex;
    flex-direction: column;
    align-items: flex-start; /* ⭐ 시작 문자 기준 */
    gap: 4px;
}

.line {
    font-size: 32px;
    font-weight: 600;
    line-height: 1.1;
    white-space: nowrap;
}

/* 시 · 군 · 구 */
#region {
    font-size: 36px;
    font-weight: 900;
    color: #fff;
    line-height: 1.1;

    position: relative;
    top: var(--region-offset-y);
}
/* ============================================ */

/* 선택 UI */
#selector {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    background: rgba(0,0,0,.6);
    padding: 25px 40px;
    border-radius: 12px;
}

select {
    width: 420px;
    padding: 10px;
    font-size: 22px;
    margin-bottom: 10px;
    background: #222;
    color: #FFD700;
    border: 2px solid #FFD700;
}

/* 캡처 버튼 (body를 기준으로, #content의 오른쪽 1cm 옆에 배치) */
#capture-btn {
    /* body가 중앙 정렬된 상태에서 #content의 오른쪽 끝 (50% + 768px)에서 40px 떨어진 곳 */
    position: absolute; 
    
    /* right: 50% - (1536px / 2) - 40px -> #content의 오른쪽 바깥 40px 지점 */
    right: calc(50% - 1536px / 2 + -140px);
    
    /* top: #content의 상단 (50% - 512px)에서 40px 떨어진 곳 */
    top: calc(50% - 1024px / 2 + -140px); 
    
    padding: 14px 28px;
    font-size: 20px;
    background: #ff69b4; /* 핫핑크 */
    color: #fff;
    border: 2px solid #FFD700;
    cursor: pointer;
    font-weight: bold;
    z-index: 100; /* 다른 요소 위에 표시 */
    box-shadow: 0 4px 10px rgba(0,0,0,0.5);
}

.hide { display:none !important; } /* !important 추가하여 확실히 숨김 */
</style>
</head>

<body>
<div id="content">
    <div id="time"></div>

    <div id="message">
        <div class="line">가까운 곳에서, 끌림이 피는 중</div>
        <div id="region">지역을 선택해 주세요</div>
        <div class="line">근처의 누군가를 찾고 있어요..</div>
    </div>

    <div id="selector">
        <select id="sido"></select>
        <select id="sigungu"></select>
    </div>
</div>

<button id="capture-btn">📸 화면 캡처</button>

<script>
// ========================= 전국 17개 광역자치단체 및 기초자치단체 데이터 =========================
const regions = {
    "서울특별시": ["강남구", "강동구", "강북구", "강서구", "관악구", "광진구", "구로구", "금천구", "노원구", "도봉구", "동대문구", "동작구", "마포구", "서대문구", "서초구", "성동구", "성북구", "송파구", "양천구", "영등포구", "용산구", "은평구", "종로구", "중구", "중랑구"],
    "부산광역시": ["강서구", "금정구", "기장군", "남구", "동구", "동래구", "부산진구", "북구", "사상구", "사하구", "서구", "수영구", "연제구", "영도구", "중구", "해운대구"],
    "대구광역시": ["군위군", "남구", "달서구", "달성군", "동구", "북구", "서구", "수성구", "중구"],
    "인천광역시": ["강화군", "계양구", "남동구", "동구", "미추홀구", "부평구", "서구", "연수구", "옹진군", "중구"],
    "광주광역시": ["광산구", "남구", "동구", "북구", "서구"],
    "대전광역시": ["대덕구", "동구", "서구", "유성구", "중구"],
    "울산광역시": ["남구", "동구", "북구", "울주군", "중구"],
    "세종특별자치시": ["세종시"],
    "경기도": ["가평군", "고양시", "과천시", "광명시", "광주시", "구리시", "군포시", "김포시", "남양주시", "동두천시", "부천시", "성남시", "수원시", "시흥시", "안산시", "안성시", "안양시", "양주시", "양평군", "여주시", "연천군", "오산시", "용인시", "의왕시", "의정부시", "이천시", "파주시", "평택시", "포천시", "하남시", "화성시"],
    "강원특별자치도": ["강릉시", "고성군", "동해시", "삼척시", "속초시", "양구군", "양양군", "영월군", "원주시", "인제군", "정선군", "철원군", "춘천시", "태백시", "평창군", "홍천군", "화천군", "횡성군"],
    "충청북도": ["괴산군", "단양군", "보은군", "영동군", "옥천군", "음성군", "제천시", "증평군", "진천군", "청주시", "충주시"],
    "충청남도": ["계룡시", "공주시", "금산군", "논산시", "당진시", "보령시", "부여군", "서산시", "서천군", "아산시", "예산군", "천안시", "청양군", "태안군", "홍성군"],
    "전라북도": ["고창군", "군산시", "김제시", "남원시", "무주군", "부안군", "순창군", "완주군", "익산시", "임실군", "장수군", "전주시", "정읍시", "진안군"],
    "전라남도": ["강진군", "고흥군", "곡성군", "광양시", "구례군", "나주시", "담양군", "목포시", "무안군", "보성군", "순천시", "신안군", "여수시", "영광군", "영암군", "완도군", "장성군", "장흥군", "진도군", "함평군", "해남군", "화순군"],
    "경상북도": ["경산시", "경주시", "고령군", "구미시", "김천시", "문경시", "봉화군", "상주시", "성주군", "안동시", "영덕군", "영양군", "영주시", "영천시", "예천군", "울릉군", "울진군", "의성군", "청도군", "청송군", "칠곡군", "포항시"],
    "경상남도": ["거제시", "거창군", "고성군", "김해시", "남해군", "밀양시", "사천시", "산청군", "양산시", "의령군", "진주시", "창녕군", "창원시", "통영시", "합천군", "하동군", "함안군", "함양군"],
    "제주특별자치도": ["제주시", "서귀포시"]
};

const sido = document.getElementById('sido');
const sigungu = document.getElementById('sigungu');
const regionDisplay = document.getElementById('region');

// 초기값 설정: 시도 셀렉트 박스 채우기
sido.innerHTML = `<option value="">광역자치단체 선택</option>`;
Object.keys(regions).forEach(r => sido.innerHTML += `<option>${r}</option>`);
sigungu.innerHTML = `<option value="">시 / 군 / 구 선택</option>`;
regionDisplay.textContent = "지역을 선택해 주세요"; 

// 시도 변경 시 시군구 목록 업데이트
sido.onchange = () => {
    sigungu.innerHTML = `<option value="">시 / 군 / 구 선택</option>`;
    const selectedSigunguList = regions[sido.value];
    
    if (selectedSigunguList) {
        if (sido.value === "세종특별자치시") {
            sigungu.innerHTML = `<option>${selectedSigunguList[0]}</option>`;
            regionDisplay.textContent = selectedSigunguList[0];
        } else {
            selectedSigunguList.forEach(sg => sigungu.innerHTML += `<option>${sg}</option>`);
            regionDisplay.textContent = sido.value; 
        }
    } else {
        regionDisplay.textContent = "지역을 선택해 주세요"; 
    }
};

// 시군구 변경 시 최종 지역 표시 업데이트
sigungu.onchange = () => {
    if (sido.value && sigungu.value && sigungu.value !== "시 / 군 / 구 선택") {
        regionDisplay.textContent = `${sido.value} ${sigungu.value}`;
    } else if (sido.value) {
        regionDisplay.textContent = sido.value; 
    }
};

/* 시간 */
setInterval(() => {
    const d = new Date();
    document.getElementById('time').textContent =
        `${String(d.getHours()).padStart(2,'0')}:${String(d.getMinutes()).padStart(2,'0')}:${String(d.getSeconds()).padStart(2,'0')}`;
}, 1000);

/* 캡처 기능 (새 탭에서 이미지 열기) */
document.getElementById('capture-btn').onclick = () => {
    const content = document.getElementById('content');
    const selector = document.getElementById('selector');
    
    // 캡처 전에 UI 숨김
    selector.classList.add('hide');

    // #content 영역만 캡처 
    html2canvas(content, {
        scale: 2, 
        useCORS: true,
    }).then(canvas => {
        // 캡처 후 UI 다시 표시
        selector.classList.remove('hide');
        
        const dataURL = canvas.toDataURL('image/png');

        // 새 탭을 열어 캡처된 이미지를 보여줍니다.
        const newWindow = window.open();
        newWindow.document.write('<img src="' + dataURL + '" alt="캡처된 이미지" style="max-width: 100%; height: auto;">');
        newWindow.document.title = '지역화면 캡처';

        alert(`✅ 화면 캡처가 완료되었습니다. 새 탭에서 이미지를 확인하고 저장해주세요.`);
        
    }).catch(err => {
        // 에러 발생 시 숨겼던 UI 다시 표시
        selector.classList.remove('hide');
        console.error("캡처 실패:", err);
        alert("❌ 화면 캡처에 실패했습니다. (콘솔 로그 확인)");
    });
};
</script>
</body>
</html>
